{# 
  kitFramework::Basic

  @author Team phpManufaktur <team@phpmanufaktur.de>
  @link https://kit2.phpmanufaktur.de
  @link https://github.com/phpManufaktur/kitFramework/wiki  
  @copyright 2012 Ralf Hertsch <ralf.hertsch@phpmanufaktur.de>
  @license MIT License (MIT) http://www.opensource.org/licenses/MIT
#}
<!DOCTYPE html>
<html>
  <head>
    {% block head %}
      {% if basic.frame.redirect.active %}
        {# catch the iframe content into the CMS if the URL is executed external #}
        <script type="text/javascript">
          if (top.location == self.location) {
            document.location.replace("{{ basic.cms.page_url }}{% if basic.frame.redirect.route|length > 0 %}?redirect={{ basic.frame.redirect.route }}{% endif %}");
          }
        </script>
      {% endif %}
      <title>{% block title %}{{ basic.page.title|default('') }}{% endblock title %}</title>
      <meta http-equiv="Content-Type" content="text/html; charset={{ basic.page.charset|default('UTF-8') }}"/>
      <meta name="robots" content="{% block robots %}{{ basic.page.robots|default('index,follow') }}{% endblock %}" />
      <meta name="description" content="{% block description %}{{ basic.page.description|default('') }}{% endblock %}" />
      <meta name="keywords" content="{% block keywords %}{{ basic.page.keywords|default('') }}{% endblock %}" />
      {% block stylesheet %}
        <link rel="stylesheet" type="text/css" href="{{ MANUFAKTUR_URL }}/Basic/Template/default/css/kitcommand.css" media="screen, projection" />
      {% endblock stylesheet %}
      {% block jquery %}
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      {% endblock jquery %}
    {% endblock head %}
  </head>
  <body>
    <div class="iframe_content">
      {% block content %}
        {% if basic.message|length > 0 %}
          <div class="iframe_content message">{{ basic.message }}</div>
        {% endif %}
      {% endblock content %}
    </div>
    {% block footer %}
      {% if basic.frame.auto %}
        <script type="text/javascript">
          if (typeof 'jQuery' !== 'undefined') {
            $(document).ready(function() {
              {# setting the iFrame height dynamically by the height of the inbounded document #}
              try {
                {# try to set the frame height - will fail if the URI is executed out of the iframe! #}
                var content_height = document.body.offsetHeight + {{ basic.frame.add|default(30) }};
                parent.document.getElementById("{{ basic.frame.id }}").style.height = content_height + "px";
              } catch(err) {
                {# nothing to do, we ignore any errors here ... #}
              }
            });
          }
        </script>
      {% endif %}
    {% endblock footer %}
    {% block tracking %}
      {% if basic.page.tracking|length > 0 %}
        <!-- tracking code from /kit2/config/tracking.htt -->
        {{ basic.page.tracking }}
      {% endif %}
    {% endblock tracking %}
  </body>
</html>
